# Lab-2实验报告

## 实验内容

合作完成PL/0语法分析器。

## 实验分工

本实验中，我负责的部分为：语句与语句序列部分的测试实现，以及对其进行合理的错误检测处理。


## 实验过程及问题

### 总体设计

由于实验一中已经完成了词法分析器，故而可以通过调用“PL0Lex_get_token”函数来获取全局文件中的词法单元。

通过进行合理的分工与设计，以及对语句和语句序列语法图的分析，在进入函数分析部分之后，栈顶元素必为代表该函数所对应的非终结符，如进入语句函数时，栈顶元素必为statement。

故而可以通过调用函数produce（已被小组其它成员实现），来实现对栈的pop即push操作。接下来只需按照语法图，依次判断处理，并使用stack_pop函数（已被小组其它成员实现）对栈进行操作即可。

对于错误检测部分，通过分析以给出的test_err.txt,可发现在语句及语句序列部分需要做的错误处理主要为if-then，while-do，begin-end的缺失匹配问题，：=的遗失及错误问题，以及ident的遗失问题。由于问题的类型主要为遗失，处理方法为：当检测到遗失错误时，显示出错误信息，并当作该错误不存在，继续往后处理。

### 问题1：语句序列中分号的问题

语句序列的推导式应为：语句序列-->语句 ； 语句序列，而在修正之前的语法图中，语句序列中最后一条语句句末分号不存在。该问题在助教修正语法图后即被解决。

### 问题2：错误检测标准的问题

由于可能出现的错误多种多样，原来没有一个标准的错误文件示范，原来尝试性做了处理遗失以及多余的错误检测。其中，出现连续多个错误是最难解决处理的。但由于test_err.txt中没有该种错误，故没有继续实现。


### 总结
本次实验原理并不困难，比较麻烦的部分在于，分工时规范对栈的调用以及对需要相互调用的函数名的统一。对于该部分进行了良好的处理，可以为后面的合并以及调试提供很大的便利。

